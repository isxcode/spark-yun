---
title: "阿里云安装部署"
---

#### 购买阿里云ECS

https://ecs.console.aliyun.com/home#/

![20240516172905](https://img.isxcode.com/picgo/20240516172905.png)

- 8核心32GB
- 公网 121.40.149.95
- 内网 172.30.31.221
- 开放端口号8080  开放端口30177

#### 链接服务器

```bash
ssh root@121.40.149.95
```

#### 创建用户

```bash
useradd zhiqingyun
passwd zhiqingyun
```

#### 使用root安装java

```bash
yum install java-1.8.0-openjdk-devel java-1.8.0-openjdk -y
```

#### 使用root用户安装docker

```bash
yum install -y yum-utils device-mapper-persistent-data lvm2
yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo 
sed -i 's+download.docker.com+mirrors.aliyun.com/docker-ce+' /etc/yum.repos.d/docker-ce.repo
yum makecache fast
yum -y install docker-ce-19.03.9-3.el7 docker-ce-cli-19.03.9-3.el7 containerd.io
systemctl start docker
```

#### 使用docker部署至轻云

```bash
docker run -p 8080:8080 isxcode/zhiqingyun
```

#### 访问项目

访问项目:   http://121.40.149.95:8080
管理员账号: admin
管理员密码: admin123

#### 创建用户租户

#### 上传许可证

#### 安装节点

![20240516174503](https://img.isxcode.com/picgo/20240516174503.png)

![20240516175737](https://img.isxcode.com/picgo/20240516175737.png)

![20240516174608](https://img.isxcode.com/picgo/20240516174608.png)

![20240516180402](https://img.isxcode.com/picgo/20240516180402.png)

#### 访问默认安装的spark服务

-  http://121.40.149.95:8081

![20240516181314](https://img.isxcode.com/picgo/20240516181314.png)

#### 使用docker安装mysql

```bash
docker run \
  --name zhiqingyun-mysql \
  --privileged=true \
  --restart=always \
  -d \
  -p 30180:3306 \
  -e MYSQL_DATABASE=isxcode_db \
  -e MYSQL_ROOT_PASSWORD=zhiqingyun123 \
  mysql:8.0
```

- jdbc:mysql://172.30.31.221:30180/isxcode_db
- root
- mysql

#### 添加mysql数据源

> 推荐使用内网

![20240516181934](https://img.isxcode.com/picgo/20240516181934.png)

![20240516182012](https://img.isxcode.com/picgo/20240516182012.png)

#### 新建作业流

![20240516182202](https://img.isxcode.com/picgo/20240516182202.png)

#### 创建jdbc执行作业

![20240516182243](https://img.isxcode.com/picgo/20240516182243.png)

```sql
create table source_table(
  username varchar(100),
  age int
);
create table target_table(
  username varchar(100),
  age int
);
insert into source_table values('zhangsan',14);
insert into source_table values('lisi',18);
```

![20240516182436](https://img.isxcode.com/picgo/20240516182436.png)

#### 创建数据同步作业

![20240516182511](https://img.isxcode.com/picgo/20240516182511.png)

![20240516182539](https://img.isxcode.com/picgo/20240516182539.png)

#### 运行作业

![20240516182758](https://img.isxcode.com/picgo/20240516182758.png)

> 查看运行日志

![20240516182814](https://img.isxcode.com/picgo/20240516182814.png)

#### 创建jdbc查询作业

![20240516182853](https://img.isxcode.com/picgo/20240516182853.png)

```sql
select * from target_table;
```

![20240516182940](https://img.isxcode.com/picgo/20240516182940.png)

#### 拖拽作业流运行

![20240516183417](https://img.isxcode.com/picgo/20240516183417.png)

![20240516183459](https://img.isxcode.com/picgo/20240516183459.png)

