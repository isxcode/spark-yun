#!/bin/bash

BASE_PATH=$(cd "$(dirname "$0")" || exit ; pwd)
cd "${BASE_PATH}" || exit
echo "进入spark-yun-agent"+"${BASE_PATH}"

# 关闭原有进程
#for metaResult in $(ps -e -o pid,command | grep spark-yun-agent.jar)
#do
#    if [ "$metaResult" == java ]; then
#      STAR_PID=${PRE_VAL}
#    	break
#	fi
#	PRE_VAL=${metaResult}
#done
#if [ _"${STAR_PID}" != _ ];then
#  kill -9 "${STAR_PID}"
#fi

# 启动项目
STAR_APP="${BASE_PATH}"/../lib/spark-yun-agent.jar
STAR_LOG="${BASE_PATH}"/../log/spark-yun-agent.log
export HADOOP_CONF_DIR=/opt/homebrew/Cellar/hadoop/3.3.4/libexec/etc/hadoop
nohup java -jar -Xmx2048m "${STAR_APP}" >> "${STAR_LOG}" 2>&1 &
echo "启动项目"
